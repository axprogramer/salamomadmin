import{r,i as b,k as u,o as E,j as e,s as M,m as D,n as K}from"./index-BOW9aXAt.js";import"./firebaseConfig-C2RYo4BK.js";import{S as c}from"./sweetalert2.all-CknvBjmT.js";import{C as m}from"./index.es-BNppl9rn.js";import{c as R}from"./cil-plus-D8mtC-W5.js";import{C as T,a as A,b as f,c as h,d as O}from"./CTable-R-4nV3n8.js";import{C as j}from"./CButton-DTyOUR8Q.js";import{c as I,a as P}from"./cil-trash-BwZseM3u.js";import{c as z}from"./cil-pen-53d2I-C-.js";const J=()=>{const[v,p]=r.useState([]),a=r.useRef(null),t=r.useRef(null),[l,x]=r.useState(""),o=r.useRef(""),i=r.useRef(""),d=r.useRef(""),y=b(),N=u(y,"/SalaMOM/tools/years/");r.useEffect(()=>{E(N,s=>{const n=s.val();p(n?Object.values(n):[])}),a.current.value=l,o.current.style.display="none"},[]);const w=s=>{const n=s.target.dataset.yearkh,B=s.target.dataset.yearen;a.current.value=n,t.current.value=B,x(n),i.current.style.display="none",o.current.style.display="inline-block",d.current.style.display="inline-block"},g=()=>{i.current.style.display="inline-block",o.current.style.display="none",d.current.style.display="none",a.current.value=null,t.current.value=null},C=()=>{const s=b();l?(c.fire({text:"ព័ត៍មានបានបញ្ចូលត្រឹមត្រូវ!",icon:"success",showConfirmButton:!1,timer:2200}),M(u(s,"/SalaMOM/tools/years/"+l),{id:a.current.value,yearEn:t.current.value,yearKh:a.current.value}),a.current.value=null,t.current.value=null):c.fire({text:"ព័ត៍មានមិនត្រឹមត្រូវ!",icon:"error",showConfirmButton:!1,timer:2200})},k=()=>{const s=b();l?(c.fire({text:"ព័ត៍មានបានកែត្រឹមត្រូវ!",icon:"success",showConfirmButton:!1,timer:2200}),D(u(s,"/SalaMOM/tools/years/"+l),{id:a.current.value,yearEn:t.current.value,yearKh:a.current.value}),t.current.value=null,a.current.value=null):c.fire({text:"ព័ត៍មានមិនត្រឹមត្រូវ!",icon:"error",showConfirmButton:!1,timer:2200})},S=s=>{l?(c.fire({text:"បានលុបត្រឹមត្រូវ",icon:"success",showConfirmButton:!1,timer:2200}),K(u(y,"/SalaMOM/tools/years/"+l)),t.current.value=null,a.current.value=null,i.current.style.display="inline-block",o.current.style.display="none",d.current.style.display="none"):c.fire({text:"ព័ត៍មានមិនត្រឹមត្រូវ!",icon:"error",showConfirmButton:!1,timer:2200})};return e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 grid-margin",children:e.jsx("div",{className:"card card-primary card-outline",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"row",children:[e.jsx("h4",{className:"card-title",children:"បង្កើតឆ្នាំសិក្សាថ្មី"}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsxs("button",{onClick:g,"data-bs-toggle":"modal","data-bs-target":"#AddNewSub",style:{color:"white"},id:"btn_upload",type:"button",className:"btn btn-success btn-sm",children:[e.jsx(m,{icon:R})," បង្កើតថ្មី"]})}),e.jsx("div",{})]})}),e.jsxs("div",{style:{overflowX:"auto",padding:"15px"},children:[e.jsxs(T,{className:"table table-bordered table-hover",children:[e.jsx(A,{children:e.jsxs(f,{className:"frezze",children:[e.jsx(h,{style:{backgroundColor:"rgb(23, 116, 153)",color:"white"},className:"border-dark text-center",children:"ល.រ"}),e.jsx(h,{style:{backgroundColor:"rgb(23, 116, 153)",color:"white"},className:"border-dark text-center",children:"ឆ្នាំសិក្សាភាសារខ្មែរ"}),e.jsx(h,{style:{backgroundColor:"rgb(23, 116, 153)",color:"white"},className:"border-dark text-center",children:"ឆ្នាំសិក្សាភាសារអង់គ្លេស"})]})}),e.jsx(O,{children:v.map((s,n)=>e.jsxs(f,{children:[e.jsx("td",{className:"text-center",children:n+1}),e.jsx("td",{className:"text-center",onClick:w,"data-bs-toggle":"modal","data-bs-target":"#AddNewSub","data-yearkh":s.yearKh,"data-yearen":s.yearEn,"data-yearid":s.id,children:s.yearEn}),e.jsx("td",{className:"text-center",children:s.yearKh})]}))})]}),e.jsx("div",{className:"modal fade",id:"AddNewSub",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 fw-bold fw-bold",children:"ឆ្នាំសិក្សាភាសារខ្មែរ"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{onChange:s=>{x(s.target.value)},ref:a,type:"text",className:"form-control",id:"subKh"})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 fw-bold",children:"ឆ្នាំសិក្សាភាសារអង់គ្លេស"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{ref:t,type:"text",className:"form-control",id:"subEn"})})]})})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs(j,{ref:i,onClick:C,style:{color:"white"},type:"button",className:"btn btn-success btn-sm",children:[e.jsx(m,{icon:I}),"   បញ្ចូល"]}),e.jsxs(j,{ref:o,onClick:k,style:{color:"white"},type:"button",className:"btn btn-warning btn-sm",children:[e.jsx(m,{icon:z}),"   កែ"]}),e.jsx("button",{ref:d,onClick:S,style:{color:"white"},id:"btn_upload",type:"button",className:"btn btn-danger btn-sm",children:e.jsx(m,{icon:P})})]})]})})})]})]})})})})};export{J as default};
