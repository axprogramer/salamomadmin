import{r as l,i as h,k as b,o as M,j as e,s as R,m as D,n as K}from"./index-BOW9aXAt.js";import"./firebaseConfig-C2RYo4BK.js";import{S as o}from"./sweetalert2.all-CknvBjmT.js";import{C as m}from"./index.es-BNppl9rn.js";import{c as T}from"./cil-plus-D8mtC-W5.js";import{C as I,a as O,b as v,c as x,d as P}from"./CTable-R-4nV3n8.js";import{C as y}from"./CButton-DTyOUR8Q.js";import{c as z,a as U}from"./cil-trash-BwZseM3u.js";import{c as _}from"./cil-pen-53d2I-C-.js";const W=()=>{const[p,N]=l.useState([]),t=l.useRef(null),a=l.useRef(null),r=l.useRef(null),[n,f]=l.useState(""),i=l.useRef(""),d=l.useRef(""),u=l.useRef(""),j=h(),w=b(j,"/SalaMOM/tools/subjects/");l.useEffect(()=>{M(w,s=>{const c=s.val();N(c?Object.values(c):[])}),t.current.value=n,i.current.style.display="none"},[]);const g=s=>{const c=s.target.dataset.subkh,B=s.target.dataset.suben,E=s.target.dataset.subabr;t.current.value=c,a.current.value=B,r.current.value=E,f(c),d.current.style.display="none",i.current.style.display="inline-block",u.current.style.display="inline-block"},C=()=>{d.current.style.display="inline-block",i.current.style.display="none",u.current.style.display="none",t.current.value=null,a.current.value=null,r.current.value=null},k=()=>{const s=h();n?(o.fire({text:"ព័ត៍មានបានបញ្ចូលត្រឹមត្រូវ!",icon:"success",showConfirmButton:!1,timer:2200}),R(b(s,"/SalaMOM/tools/subjects/"+n),{id:t.current.value,subAbr:r.current.value,subEn:a.current.value,subKh:t.current.value}),t.current.value=null,a.current.value=null,r.current.value=null):o.fire({text:"ព័ត៍មានមិនត្រឹមត្រូវ!",icon:"error",showConfirmButton:!1,timer:2200})},S=()=>{const s=h();n?(o.fire({text:"ព័ត៍មានបានកែត្រឹមត្រូវ!",icon:"success",showConfirmButton:!1,timer:2200}),D(b(s,"/SalaMOM/tools/subjects/"+n),{id:t.current.value,subAbr:r.current.value,subEn:a.current.value,subKh:t.current.value}),a.current.value=null,t.current.value=null,r.current.value=null):o.fire({text:"ព័ត៍មានមិនត្រឹមត្រូវ!",icon:"error",showConfirmButton:!1,timer:2200})},A=s=>{n?(o.fire({text:"បានលុបត្រឹមត្រូវ",icon:"success",showConfirmButton:!1,timer:2200}),K(b(j,"/SalaMOM/tools/subjects/"+n)),a.current.value=null,t.current.value=null,r.current.value=null,d.current.style.display="inline-block",i.current.style.display="none",u.current.style.display="none"):o.fire({text:"ព័ត៍មានមិនត្រឹមត្រូវ!",icon:"error",showConfirmButton:!1,timer:2200})};return e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 grid-margin",children:e.jsx("div",{className:"card card-primary card-outline",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"row",children:[e.jsx("h4",{className:"card-title",children:"បង្កើតមុខវិជ្ជាថ្មី"}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsxs("button",{onClick:C,"data-bs-toggle":"modal","data-bs-target":"#AddNewSub",style:{color:"white"},id:"btn_upload",type:"button",className:"btn btn-success btn-sm",children:[e.jsx(m,{icon:T})," បង្កើតថ្មី"]})}),e.jsx("div",{})]})}),e.jsxs("div",{style:{overflowX:"auto",padding:"15px"},children:[e.jsxs(I,{className:"table table-bordered table-hover",children:[e.jsx(O,{children:e.jsxs(v,{className:"frezze",children:[e.jsx(x,{style:{backgroundColor:"rgb(23, 116, 153)",color:"white"},className:"border-dark text-center",children:"ល.រ"}),e.jsx(x,{style:{backgroundColor:"rgb(23, 116, 153)",color:"white"},className:"border-dark text-center",children:"មុខវិជ្ជាជាភាសារខ្មែរ"}),e.jsx(x,{style:{backgroundColor:"rgb(23, 116, 153)",color:"white"},className:"border-dark text-center",children:"មុខវិជ្ជាជាភាសារអង់គ្លេស"}),e.jsx(x,{style:{backgroundColor:"rgb(23, 116, 153)",color:"white"},className:"border-dark text-center",children:"អក្សរកាត់"})]})}),e.jsx(P,{children:p.map((s,c)=>e.jsxs(v,{children:[e.jsx("td",{className:"text-center",children:c+1}),e.jsx("td",{className:"text-center",onClick:g,"data-bs-toggle":"modal","data-bs-target":"#AddNewSub","data-subkh":s.subKh,"data-suben":s.subEn,"data-subabr":s.subAbr,"data-subid":s.id,children:s.subKh}),e.jsx("td",{className:"text-center",children:s.subEn}),e.jsx("td",{className:"text-center",children:s.subAbr})]}))})]}),e.jsx("div",{className:"modal fade",id:"AddNewSub",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 fw-bold fw-bold",children:"មុខវិជ្ជាជាភាសារខ្មែរ"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{onChange:s=>{f(s.target.value)},ref:t,type:"text",className:"form-control",id:"subKh"})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 fw-bold",children:"មុខវិជ្ជាជាភាសារអង់គ្លេស"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{ref:a,type:"text",className:"form-control",id:"subEn"})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-sm-3 fw-bold",children:"អក្សរកាត់"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{ref:r,type:"text",className:"form-control",id:"subAbr"})})]})})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs(y,{ref:d,onClick:k,style:{color:"white"},type:"button",className:"btn btn-success btn-sm",children:[e.jsx(m,{icon:z}),"   បញ្ចូល"]}),e.jsxs(y,{ref:i,onClick:S,style:{color:"white"},type:"button",className:"btn btn-warning btn-sm",children:[e.jsx(m,{icon:_}),"   កែ"]}),e.jsx("button",{ref:u,onClick:A,style:{color:"white"},id:"btn_upload",type:"button",className:"btn btn-danger btn-sm",children:e.jsx(m,{icon:U})})]})]})})})]})]})})})})};export{W as default};
