import{r as t,u as y,i as L,k as N,o as B,j as e}from"./index-BOW9aXAt.js";import{d as E,C as d}from"./index.es-BNppl9rn.js";import"./firebaseConfig-C2RYo4BK.js";import{S as a}from"./sweetalert2.all-CknvBjmT.js";import{C as p,a as g}from"./CRow--Gzynjr9.js";import{C as R}from"./CCardGroup-4LTW45Ob.js";import{C as P,a as k}from"./CCardBody-BbHo6ivh.js";import{C as F}from"./CForm-BV0elm5a.js";import{C as f,a as x}from"./CInputGroupText-BH7m5G_U.js";import{c as G}from"./cil-user-Ddrdy7PS.js";import{C as h}from"./CFormInput-E7p_wjaD.js";import{c as M}from"./cil-lock-locked-DmxpJbVL.js";import{C as U}from"./CButton-DTyOUR8Q.js";import"./CFormControlWrapper-BCG8pJE3.js";import"./CFormControlValidation-BXooxnYu.js";import"./CFormLabel-CXutFTkz.js";const ee=()=>{const l=t.useRef(null),n=t.useRef(null),c=y(),m=t.useRef(null),C=L(),j=N(C,"/SalaMOM/users");return t.useEffect(()=>{localStorage.getItem("isLoggedIn")==="true"&&(m.current=localStorage.getItem("isLoggedIn"));const I=document.querySelector("form");B(j,_=>{_.forEach(r=>{const o=r.val().user_username,S=r.val().user_password,b=r.val().user_subs,i=r.val().user_url,u=r.val().user_teacher_year,s=r.val().user_role,w=v=>{v.preventDefault(),l.current.value==o&&(n.current.value==S?(m.current=!0,localStorage.setItem("isLoggedIn","true"),a.fire({text:"សូមមេត្តារង់ចាំបន្តិច!",icon:"success",showConfirmButton:!1,timer:3500,timerProgressBar:!0,didOpen:()=>{a.showLoading()}}),setTimeout(()=>{s=="admin"&&(c("/dashboard"),window.location.reload(),localStorage.setItem("user_role",s),localStorage.setItem("currentPage","/dashboard"),localStorage.setItem("user_img",i),localStorage.setItem("user_name",o),localStorage.setItem("user_year",u)),s=="assistant"&&(localStorage.setItem("currentPage","/students"),localStorage.setItem("user_role",s),localStorage.setItem("user_img",i),localStorage.setItem("user_name",o),localStorage.setItem("setSubs",b),localStorage.setItem("user_year",u),c("/students"),window.location.reload())},3600)):a.fire({text:"ឈ្មោះប្រើប្រាស់ ឬលេខសំងាត់ មិនត្រឹមត្រូវ!",icon:"error",showConfirmButton:!1,timer:1500}))};I.addEventListener("submit",w)})})},[]),e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(E,{children:e.jsx(p,{className:"justify-content-center",children:e.jsx(g,{md:8,children:e.jsx(R,{children:e.jsx(P,{className:"p-4",children:e.jsx(k,{children:e.jsxs(F,{children:[e.jsx("div",{class:"brand-logo text-center",children:e.jsx("img",{src:"https://res.cloudinary.com/salamomschool/image/upload/v1714370275/salamomlogo.png",alt:"logo",width:"130rem"})}),e.jsx("p",{className:"text-body-secondary m-3 text-center",children:"សួស្តី! សូមបំពេញព័ត៍មានរបស់អ្នក។"}),e.jsxs(f,{className:"mb-3",children:[e.jsx(x,{children:e.jsx(d,{icon:G})}),e.jsx(h,{placeholder:"Username",autoComplete:"username",ref:l})]}),e.jsxs(f,{className:"mb-4",children:[e.jsx(x,{children:e.jsx(d,{icon:M})}),e.jsx(h,{type:"password",placeholder:"Password",autoComplete:"current-password",ref:n})]}),e.jsx(p,{children:e.jsx(g,{xs:6,children:e.jsx(U,{color:"primary",className:"px-4 text-center",type:"submit",children:"Login"})})})]})})})})})})})})};export{ee as default};
